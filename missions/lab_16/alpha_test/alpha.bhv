initialize   DEPLOY = false
initialize   RETURN = false
initialize   TRACK  = true
initialize   SURVEY = false

set MODE = ACTIVE {
  DEPLOY = true
} INACTIVE

set MODE = RETURNING{
  MODE = ACTIVE
  RETURN = true
}

// Example of relevant tree structure. Or make a parent tree to these two
//set MODE = SURVEYING{
//  MODE = ACTIVE
//  RETURN = false
//  SURVEY = true
//}
//
//set MODE = TRACKING{
//  MODE = ACTIVE:SURVEYING
//  TRACK = true
//}

set MODE = TRACKING{
  MODE = ACTIVE
  TRACK = true
}

//----------------------------------------------
Behavior=BHV_Waypoint
{
  name       = waypt_return
  pwt        = 200
  condition  = MODE==RETURNING
  perpetual  = true
  endflag    = RETURN = false
  endflag    = DEPLOY = false
  endflag    = MISSION = complete

           speed = 2.0
  capture_radius = 2.0
     slip_radius = 8.0
          points = 0,0
}

Behavior = BHV_ConstantHeading
{
 // General Behavior Parameters
 // ---------------------------
 name         = const_hdg            
 pwt          = 100                  
 condition    = MODE==TRACKING    
 updates      = CONST_HDG_UPDATES    

 // Parameters specific to this behavior
 // ------------------------------------
            basewidth = 10           
             duration = no-time-limit 
              heading = 145           
 heading_mismatch_var = HDG_DIFF     
            peakwidth = 10           
          summitdelta = 25           
}

 Behavior = BHV_ConstantSpeed
 {
   // General Behavior Parameters
   // ---------------------------
   name         = const_spd_transit  
   pwt          = 120                
   condition    = MODE==TRACKING   
   updates      = CONST_SPD_UPDATES  

   // Parameters specific to this behavior
   // ------------------------------------
            basewidth = 0.2          
             duration = no-time-limit         
                speed = 1.0           
   speed_mismatch_var = SPEED_DIFF   
            peakwidth = 0            
          summitdelta = 0            
 }

// has been tested to work in zigleg-mission just after the app had been copied from the zigleg format

Behavior=BHV_GradTrack
{
    name       = gradtrack
    pwt        = 300
    condition  = MODE==TRACKING
    perpetual  = false
    updates    = GRADTRACK_UPDATES 

    pulse_range     = 20
    pulse_duration  = 4
    zigleg_offset   = 40
    zigleg_duration = 7
}


//Behavior=BHV_GradTrack
//{
//    name       = gradtrack
//    pwt        = 300
//    condition  = MODE==TRACKING
//    perpetual  = false
//    updates    = GRADTRACK_UPDATES 
//
//    pulse_range     = 20
//    pulse_duration  = 4
//    zigleg_offset   = 40
//    zigleg_duration = 7
//}